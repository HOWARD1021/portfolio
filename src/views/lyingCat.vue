<template>
  <div class="lyingCat">
    <div class="content content--cat">
      <div class="fox">
      
        <div class="fox-tail">
						<div class="fox-tail">
							<div class="fox-tail">
								<div class="fox-tail">
									<div class="fox-tail">
										<div class="fox-tail">
											
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
      </div>
        <div class ="place_center">
          <div class="Cat">
            <svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g id="flower_cat 1">
              <g id="eye">
              <path id="Vector" d="M3.52117 35.0281C2.2242 32.7035 2.41519 30.0831 2.65948 26.7C3.01908 22.0947 4.26899 17.645 6.31497 13.6862C8.13605 10.1163 10.1393 6.18828 14.1812 3.82733C19.6844 0.599842 25.2853 2.41077 27.3107 3.06976C34.2309 5.31136 40.9999 11.8909 42.9854 21.0752C44.198 26.674 43.2341 31.4218 42.7144 33.9748C42.0926 37.0518 41.4663 39.9524 39.3077 41.9242C37.571 43.512 35.5856 43.8181 33.3558 43.9219C26.7955 44.228 23.3799 42.5572 12.48 39.5165C7.17665 38.0221 4.92918 37.5707 3.52117 35.0281Z" fill="#4C415A"/>
              <path id="Vector_2" d="M7.37648 33.3936C6.75497 31.8984 6.49246 30.2341 6.61694 28.5783C6.90121 20.769 7.06111 16.5401 9.72611 11.9479C11.2069 9.21004 13.2677 6.96518 15.7091 5.4307C23.2599 0.86448 31.2549 5.80429 32.392 6.52035C39.0545 10.7701 41.2398 18.1486 41.6573 19.6534C42.1814 21.5266 44.4067 29.5123 40.729 36.3409C39.5945 38.5557 37.9633 40.3661 36.0119 41.5765C34.7594 42.3237 32.8628 43.0916 24.1349 41.6751C20.9147 41.1562 14.0301 39.8849 9.8949 36.5381C8.84354 35.7524 7.97765 34.6713 7.37648 33.3936V33.3936Z" fill="url(#paint0_linear_1_2)"/>
              <path id="Vector_3" d="M23.3443 10.1941C22.496 11.2838 24.9167 15.4193 25.9471 17.1835C27.1615 19.2894 28.6272 21.1817 30.2999 22.8031C31.3171 23.763 35.47 27.7066 36.5183 26.674C37.7264 25.5117 35.1591 17.91 30.2155 13.3853C27.7282 11.0918 24.1527 9.16671 23.3443 10.1941Z" fill="#231815" stroke="#231815" stroke-miterlimit="10"/>
              <path id="Vector_4" d="M19.9021 15.8915C19.5911 14.6825 20.897 13.1206 22.0474 12.472C22.5526 12.1894 23.1039 12.0367 23.664 12.0242C24.2241 12.0116 24.78 12.1396 25.2942 12.3994C25.4408 12.4772 27.0975 13.4372 27.0487 14.7499C26.9998 16.0627 25.0943 17.0175 23.9972 17.2562C22.5093 17.5779 20.2529 17.2562 19.9021 15.8915Z" fill="white" stroke="#231815" stroke-miterlimit="10"/>
              <path id="Vector_5" d="M27.1375 8.14449C27.1375 7.87467 29.1673 7.55815 31.2327 8.14449C32.4079 8.45985 33.5148 9.05515 34.484 9.89314C36.7671 11.896 37.4911 14.7551 38.1218 17.2562C38.9346 20.4733 39.0412 23.4361 38.8369 23.4828C38.6326 23.5295 38.3439 21.4903 37.0824 17.7751C36.5604 16.1095 35.8621 14.5267 35.0037 13.0636C34.5851 12.2995 34.0717 11.6122 33.4802 11.0243C33.2315 10.7856 32.4542 10.0748 30.1934 9.19265C28.1191 8.40913 27.102 8.34167 27.1375 8.14449Z" fill="white" stroke="#231815" stroke-miterlimit="10"/>
              </g>
              </g>
              <defs>
              <linearGradient id="paint0_linear_1_2" x1="6.60361" y1="22.9899" x2="42.781" y2="22.9899" gradientUnits="userSpaceOnUse">
              <stop stop-color="#4D445C"/>
              <stop offset="1" stop-color="#A1618B"/>
              </linearGradient>
              </defs>
            </svg>

          </div>
        </div>

      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="display:none">
        <defs>
            <filter id="squiggly-0">
                <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="0" />
                <feDisplacementMap id="displacement" in="SourceGraphic" in2="noise" scale="2" />
            </filter>
            <filter id="squiggly-1">
                <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="1" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" />
            </filter>
            <filter id="squiggly-2">
                <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="2" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="2" />
            </filter>
            <filter id="squiggly-3">
                <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="3" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" />
            </filter>
            <filter id="squiggly-4">
                <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="4" />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="1" />
            </filter>
        </defs>
      </svg>
    </div><!-- /content -->

    <div class="canvas-bCenter" >
      <canvas id="canvas" width="220" height="220" ref="canvas" @click="trigger">   </canvas>
    </div>

  </div>
</template>

<script>
// @ is an alias to /src
import rough from 'roughjs/bundled/rough.cjs';

export default {
  name: 'LyingCat',
  components: {
  },
  data() {
    return {
      activate: true,
      vueCanvas: null
    }
  },
  mounted() {
    console.log(document.getElementById('test'))
    console.log(this.$refs.canvas)
    this.vueCanvas = rough.canvas(this.$refs.canvas);//);
    this.vueCanvas.rectangle(20, 70, 180, 80, { 
                            roughness: 2.5, 
                            fill: '#EBCEA2',
                            hachureAngle: 60,
                            //hachureGap: 8,
                            fillWeight: 3 ,
                            bowing: 1,
                            fillStyle:'solid'
                            });
  },
  methods:{

    trigger(){
      console.log("trigger")
    }
  }
}
</script>

<style lang="scss">
@import 'node_modules/sassdash';
@import 'node_modules/sass-svg/index';

  $duration: 17s;
  $size: 0.07;
  $color-fox: #e37c67;
  
/* cat animation */

.fox {
	position: absolute;
	height: 375vmax * $size;
	width: 260vmax * $size;
	animation: fox $duration none, squigglevision 0.3s infinite;
	animation-timing-function: cubic-bezier(0, 0, 0.80, 0.90);
	bottom: 2.5vmax;
	left: 60%;
	transform-origin: bottom right;

	*, *:before, *:after {
		animation-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1) !important;
	}

	* {  
		position: absolute;
		background-size: contain;
		background-repeat: no-repeat;
		transform-style: preserve-3d;
		
		&:before, &:after {
			content: '';
			position: absolute;
			display: block;
			background-size: contain;
			background-repeat: no-repeat;
			height: 100%;
			width: 100%;
		}
	}
}

.lyingCat {
  .content--cat {
    //background: url('../img/ballon.png') no-repeat 50% 30%; //center center fixed
    background-size: cover;
    position: absolute;
    pointer-events: none;
    top: 0;
    //left: 0;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    left:50%;
    transform: translateX(-50%); 

    &:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-position: bottom center;
        background-repeat: no-repeat;
        background-size: cover;
      /*@include svg((viewBox: (0 0 1290 900))) {
          @include svg('path', (
            fill: #7e8841,
            d: 'M1290,764.1V900H0V722c115.2,0,514.2,135.7,698,134.8C903.5,855.7,1223.5,764.1,1290,764.1z'
          ));

          @include svg('path', (
            fill: #4f6333,
            d: 'M6,900c0,0,209.1-96.7,417.9-88.5c180.9,7.1,230.7,64.4,442.4,60.9c68.2-1.1,126.6-8.1,233.7-1.5c71.8,4.5,190,29,190,29H6z'
          ));
        }*/
      
    }

  }
  .place_center{
    @apply flex justify-center;
    .Cat {
      position: absolute;
      @apply  flex justify-center;
      animation: cat $duration none, squigglevision 0.3s infinite;
      animation-timing-function: cubic-bezier(0, 0, 0.8, 0.9);
      bottom: 20.5vmax;

      transform-origin: bottom right;
      width : 50vw;
      height: auto;
    }

  }

  #eye {
    transform-origin: center;
    animation: blink 5s infinite;
  }
    
  }

  @-webkit-keyframes blink {
    0%, 100% {
        transform: scale(1, .05);
    }
    5%,
    95% {
        transform: scale(1, 1);
    }
  }

  .fox-tail {
    z-index: -1;
    $initial-tail-width: 50vmax * $size;
    width: $initial-tail-width;
    height: $initial-tail-width;
    transform-origin: center bottom;

    &:before {
      transform-origin: center bottom;

        @include svg((viewBox: (0 0 66.4 66.4))) {
        @include svg('path', (
          fill: rgb(31, 31, 182),
          d: 'M43.0793 30.6286C42.8598 29.2779 42.6111 29.4953 35.3529 19.5903C29.4118 11.4708 26.412 7.34113 25.3437 4.76397C24.4657 2.63705 24.2462 1.56582 23.0756 0.75852C19.5782 -1.66338 13.5054 2.23339 8.91052 5.16762C3.56935 8.58312 0.554866 10.5237 0.0426991 13.9858C-0.264601 16.0351 1.0963 18.752 3.8181 24.2013C4.98877 26.5455 6.32042 29.1848 8.54468 32.6158C11.047 36.4971 13.2127 39.8349 16.6662 43.0331C20.6025 46.6815 24.0267 49.8486 28.3728 49.8176C36.4943 49.771 44.411 38.624 43.0793 30.6286Z'
        ));
      }
    }

    .fox > & {
      transform: rotate(90deg);
      top: 280vmax * $size;
      left: 160vmax * $size;
    }

    > .fox-tail {
      animation: tail-inner 3s ease-in-out both infinite;
      top: -$initial-tail-width / 2;
      transform:
        scale(1.1)
        rotate(-35deg);
    }

    > .fox-tail > .fox-tail > .fox-tail > .fox-tail {
      // opacity: 0.5;
      animation: tail-outer 3s ease-in-out both infinite;
      transform:
        scale(1.1)
        rotate(15deg);
    }
  }

  @keyframes tail-inner {
    0% { transform: scale(1.1) rotate(-38deg); }
    50% { transform: scale(1.1) rotate(-35deg); }
    100% { transform: scale(1.1) rotate(-38deg); }
  }

  @keyframes tail-outer {
    0% { transform: scale(1.1) rotate(-3deg); }
    50% { transform: scale(1.1) rotate(15deg); }
    100% { transform: scale(1.1) rotate(-3deg); }
  }

/*
  @keyframes tail-inner {
    0% { transform:  rotate(-1deg); }
    50% { transform:  rotate(-2deg); }
    100% { transform: rotate(-3deg); }
  }

  @keyframes tail-outer {
    0% { transform: scale(1.1) rotate(-3deg); }
    50% { transform: scale(1.1) rotate(15deg); }
    100% { transform: scale(1.1) rotate(-3deg); }
  }
*/
  $animations: (

    'body': (
      (1s, 2s, 3s, 4s): translateY(5vmax * $size),
      (1.2s, 2.2s, 3.2s, 4.2s): translateY(0),
    )
  );

  @each $animation-name, $animation in $animations {
    @keyframes #{$animation-name} {
      @each $offsets, $transform in $animation {
        @each $offset in $offsets {      
          #{percentage($offset / $duration)} {
            @if (type-of($transform) == 'number') {
              opacity: $transform;
            } @else {
              transform: #{$transform};
            }
          }
        }
      }
    }
  }


  @keyframes squigglevision {
    0% {
      filter: url("#squiggly-0");
    }
    25% {
      filter: url("#squiggly-1");
    }
    50% {
      filter: url("#squiggly-2");
    }
    75% {
      filter: url("#squiggly-3");
    }
    100% {
      filter: url("#squiggly-4");
    }
  }


  /* some style */

  .canvas-bCenter{
    @apply flex justify-center ;

    #canvas {
      position: absolute;
      top: -20vh;
      bottom: 0;
      left: 0;
      right: 0;
      margin:auto;
    }
  }
  

</style>